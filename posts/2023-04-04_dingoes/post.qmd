---
title: "An exploration of dingo observations in the ALA"
description: |
  Time-series analyses can be handy for seeing trends over time, and exploring how trends relate to major events. Here, we show how to create an exploratory time-series plot comparing observations of waterbirds prior to and during the COVID-19 pandemic.
author:
  - name: "Amos Smith"
  - name: "Dax Kellie"
date: "2023-04-04"
title-block-banner: "#B8573E"
include-after-body: _footer.html
toc: true
toc-location: left
toc-depth: 3
categories:
  - Eukaryota
  - Animalia
  - Mammalia
  - Summaries
  - Maps
  - Intern-post
image: ducks.png
freeze: true
draft: true
---

```{r}
#| include: false
library(htmltools)
```

<!-- remove metadata section -->
```{css, echo = FALSE}
#title-block-header.quarto-title-block.default .quarto-title-meta {
    display: none;
}
```


<!-- Author card -->

:::{.author-card}
:::{.author-card-text}

#### Author
Amos Smith 
[Olivia Torresan](https://labs.ala.org.au/people/Torresan_Olivia/index.html)  
[Dax Kellie](https://labs.ala.org.au/people/Kellie_Dax/index.html)  

#### Date
4 April 2023

:::

:::{.author-card-image}
```{r, out.width='120px', out.extra='style="clip-path: circle();"', echo=FALSE}
knitr::include_graphics("https://raw.githubusercontent.com/AtlasOfLivingAustralia/ala-labs/main/images/people/thai.jpg")
```
:::

:::{.author-card-image}
```{r, out.width='120px', out.extra='style="clip-path: circle();"', echo=FALSE}
knitr::include_graphics("https://raw.githubusercontent.com/AtlasOfLivingAustralia/ala-labs/main/images/people/olivia.jpg")
```
:::

:::{.author-card-image}
```{r, out.width='120px', out.extra='style="clip-path: circle();"', echo=FALSE}
knitr::include_graphics("https://raw.githubusercontent.com/AtlasOfLivingAustralia/ala-labs/main/images/people/dax.jpg")
```
:::

:::

<!------------------------ Post starts here ------------------------>

:::{.callout-tip}

## Intern Post

:::

The dingo is one of Australia's most well-recognised species internationally. However, debate continues in Australia on whether dingoes are considered pests or a protected native species.

Dingoes have major negative impacts on livestock producers, especially sheep farmers. To reduce this impact, landowners and government, spend an estimated [\~$30 million annually across Australia](https://www.publish.csiro.au/wr/pdf/WR19030) to control wild dog and dingo populations. Populations are often controlled using traps, baits and shooting. Australia also possesses the Dingo Fence, a wire fence made to protect from the loss of sheep for the sheep industry; it is the longest fence in the world (5,614 km). 

Since its construction 80 years ago, the Dingo Fence has perhaps unintentionally [shaped the landscape of Australia and showed the importance of apex predators like dingoes in ecosystems](https://www.abc.net.au/news/2023-02-09/dingo-fence-map-ecology-farming-predator-sheep-extinction/101711608). The dingo fence has acted as a natural experiment: On the side where dingoes remain present there is [more vegetation, likely because there is less grazing pressure from herbivores](https://link.springer.com/article/10.1007/s10980-021-01206-w) and [fewer invasive species like foxes, benefitting native biodiversity ](https://www.publish.csiro.au/am/AM21036). The difference between sides of the fence is so distinct that [you can even see it from space](https://youtu.be/ivmQk5EsScw)!

Despite evidence that [dingoes can even be allies for livestock producers](https://theconversation.com/killing-dingoes-is-the-only-way-to-protect-livestock-right-nope-200905), historical and current control programs along with habitat loss have impacted dingo populations negatively, currently listed as [vulnerable to extinction under the IUNC's Red List of Threatened Species](https://www.iucnredlist.org/species/41585/10484199). 

In an exploratory analysis, here we'll use data in the Atlas of Living Australia (ALA) to investigate how historical and ongoing differences in attitudes towards dingo conservation affect where and how often dingo observations are recorded.



## Download data

Let's start by seeing how many and where observations of dingoes are in the ALA.

[dingo photos]

First let's install the required packages.

```{r}
#| warning: false
#| message: false
library(galah)
library(tidyverse)
library(ozmaps)
library(sf)
library(patchwork)
library(here)
library(rmapshaper)
library(ggpointdensity)
library(glue)
library(ggtext)
```

## Which states have the highest counts of dingoes?

Let's find how many dingo observations there are in the ALA for each state/territory using the [{galah} package]().

Because **Canis familiaris** is the taxonomic name of both dingoes and dogs, if we only search using the scientific name, we'll likely return more than just dingo records. To fix this, let's filter our records to those specified by the data provider with the name common name "Dingo". 

Data collectors might not *always* specify the name "Dingo" when they collect their data, so this issue might suggest that there are more observations of dingoes that were never specified by data providers. It's hard to know for certain

Let's use `search_fields()` to help us find which fields we can use to filter the taxonomic name. There are a few options, but the `raw_vernacularName` field seems to hold original common names specified by data providers.

```{r}
search_fields("common name")
search_fields("raw_vernacularName") |> search_values("dingo")
```
Let's also find the field that contains states & territories.
```{r}
search_fields("australian states")
search_fields("cl22") |> show_values()
```

Now we can use download record counts by state with `atlas_counts()`. **We'll also add an ALA "profile", a set of data quality filters by the ALA to remove unreliable observations.**

```{r}
dingo_counts <- galah_call() |>
  galah_identify("canis familiaris") |>
  galah_filter(raw_vernacularName == "Dingo") |>
  galah_group_by(cl22) |>
  galah_apply_profile(ALA) |> # set of data quality filters
  atlas_counts()
```

We'll arrange the counts in descending order. Northern Territory and South Australia hold the highest number of observations. Other states have very limited observations.

```{r}
dingo_counts |>
  arrange(desc(count))
```

```{r}
#| code-fold: true
#| message: false
#| warning: false
# Add map of australia
aus <- ozmap_data(data = "states")

# Join state counts to our map
state_counts <- aus %>%
  full_join(dingo_counts, by = c("NAME" = "cl22"))

# log-transform data to scale counts for nicer plotting
logged_counts <- state_counts |>
  mutate(log = log10(count))|>
  replace_na(list(log = 0))

# plot
ggplot() +
  geom_sf(data = logged_counts,
          mapping = aes(fill = log)) +
  geom_sf_text(data = logged_counts,
               aes(label = count),
               colour = "white",
               size = 8,
               fun.geometry = sf::st_centroid) +
  scale_fill_distiller(palette = "OrRd", direction = 1) +
  labs(x = "Longitude", y = "Latitude") +
  theme_void() + 
  theme(legend.position = "none")
```

## Data providers?

Next let's find out who the main data providers are of dingo observations in the ALA.

Why are dingo observations mainly in two states? Let's find out who the main data providers are to see who currently records these observations.

To view only the main data providers, we'll filter to only providers that have provided more than 5 observations of dingoes

```{r}
data_providers <- galah_call() |>
  galah_identify("canis familiaris") |>
  galah_filter(raw_vernacularName == "Dingo") |>
  galah_group_by(dataResourceName)|>
  galah_apply_profile(ALA) |>
  atlas_counts()

counts_filtered <- data_providers |>
  filter(count > 5)
```

Now we'll filter our `data.frame` with occurrences so that only the observations from each data provider with greater than 5 observations (saved in `counts_filtered`) are returned.

```{r}
dingo_obs <- galah_call()|>
  galah_identify("canis familiaris") |>
  galah_filter(raw_vernacularName == "Dingo") |>
  galah_apply_profile(ALA) |>
  atlas_occurrences()

points_filtered <- dingoocc_dataproviders |>
  filter(dataResourceName %in% counts_fitered$dataResourceName)
```

Now we can plot

Here, we find that it is state organisations recording dingo data, with 0 public/citizen recordings from popular apps like iNaturalist. With mainly government monitoring programs providing dingo observations, our knowledge of dingo's true distribution depends a lot on differences between state organisations and their willingness to survey for dingoes.

*Incidental dingo observations from citizen scientists can improve our overall knowledge of dingo distributions across Australia. In areas where there are few observations of dingoes, citizen science can then be valuable to fill gaps where state organisations do not record data.*

There are only 4 data providers all state organisations that account for 98.5% of records and two of them are within the Northern Territory. The Northern Territory accounts for 56% of all dingo records. In contrast, Western Australia, Victoria, Australian Capital Territory and Queensland combined account for only 5% of records.

It's possible that varying attitudes towards dingoes and their conservation status between states/territories affect the amount of data recorded of dingo observations. For example, the Northern Territory is the only state in Australia that recognizes dingoes as a protected species which also has the highest amount of observations. In other states such as Western Australia, New South Wales, Queensland and South Australia inside the dog fence dingoes are declared a pest species. Outside the Dog Fence they are managed as unprotected native animals under the National Parks and Wildlife Act 1972. These differences in legislation between states might help to explain why the highest numbers of observations are in areas that recognize dingoes as protected.

```{r}
#| code-fold: true
#| column: page
#| fig-align: center
#| fig-height: 7
#| fig-width: 12

data_providers <- ggplot() +
  geom_sf(data = aus, fill = "beige") +
  geom_point(data = points_fitered,
             mapping = aes(x = decimalLongitude,
                           y = decimalLatitude,
                           colour = dataResourceName),
             alpha = 0.25) +
  scale_color_manual(values = c(
    "Museums Victoria provider for OZCAM" = "#A838FF", 
    "Victorian Biodiversity Atlas" = "#6095FF", 
    "Australian National Wildlife Collection provider for OZCAM" = "#FE7D49", 
    "NSW BioNet Atlas" = "#FF38DE", 
    "SA Fauna (BDBSA)" = "#58D68D", 
    "Australian Museum provider for OZCAM" = "#FFC300", 
    "Fauna Atlas N.T." = "#566573")) +
  theme_bw() +
  theme(axis.text.x=element_text(angle = -90, hjust = 0), 
        panel.background = element_rect(fill = "white", size = 2), 
        panel.grid.major = element_line(colour = NA),
        plot.title = element_text(face = "bold", size = 16, hjust = 0.5, line = 3),
        axis.ticks = element_line(colour = "grey70", size = 0.2),
        axis.title.y = element_text(size = 12, vjust = 3),
        axis.title.x = element_text(size = 12, vjust = -3),
        legend.position = "none") +
  guides(color = guide_legend(title = "Data Providers", alpha = "none")) +
  labs(x = "Longitude",
       y = "Latitude")


bar_plot <-  counts_fitered %>%
  ggplot(aes(x = reorder(str_wrap(dataResourceName, 25), - count), 
             y = count, fill = dataResourceName)) +
    geom_bar(stat="identity", width=.8) +
    scale_fill_manual(values = c(
    "Museums Victoria provider for OZCAM" = "#A838FF", 
    "Victorian Biodiversity Atlas" = "#6095FF", 
    "Australian National Wildlife Collection provider for OZCAM" = "#FE7D49", 
    "NSW BioNet Atlas" = "#FF38DE", 
    "SA Fauna (BDBSA)" = "#58D68D", 
    "Australian Museum provider for OZCAM" = "#FFC300", 
    "Fauna Atlas N.T." = "#566573")) +
    coord_flip() +
    xlab("") +
    theme_bw() + 
  theme(legend.position = "none",
        axis.text = element_text(size = 12))


# Plot bar plot and map
bar_plot + data_providers + 
  plot_annotation(
    title = "Data Providers for Dingo Occurrences"
  ) + 
  plot_layout(widths = c(1, 2),
              heights = c(2, 1))
```




```{r}
#| echo: false

# Use a ALA-registered email (register at ala.org.au)
galah_config(email = "SMI9E9@csiro.au", verbose = FALSE)
```

```{r, echo = FALSE}
#| eval: false

# Use a ALA-registered email (register at ala.org.au)
galah_config(email = "your-email-here")
```



<details><summary style = "color: #E06E53;">Expand for session info</summary>

```{r, echo = FALSE}
library(sessioninfo)
# save the session info as an object
pkg_sesh <- session_info(pkgs = "attached")
# print it out
pkg_sesh
```

</details>
