<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.306">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Amanda Buyan,Dax Kellie">
<meta name="dcterms.date" content="2023-11-23">

<title>How to Make a Map using ALA data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Make_A_Map_files/libs/clipboard/clipboard.min.js"></script>
<script src="Make_A_Map_files/libs/quarto-html/quarto.js"></script>
<script src="Make_A_Map_files/libs/quarto-html/popper.min.js"></script>
<script src="Make_A_Map_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Make_A_Map_files/libs/quarto-html/anchor.min.js"></script>
<link href="Make_A_Map_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Make_A_Map_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Make_A_Map_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Make_A_Map_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Make_A_Map_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="style.css">
</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">How to Make a Map using ALA data</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Amanda Buyan,Dax Kellie </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 23, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>Maps are a useful way to represent data, especially if you want to see where Atlas data is. It is also helpful, when cleaning your data, to spot errors (say, one of your occurrences is in the ocean when it is a terrestrial species). In this post, we will use Python, the <code>galah-python</code>,<code>geopandas</code> and <code>matplotlib</code> packages to create a map.</p>
<p>First, we need to set up our environment for <code>galah-python</code>. To do this, we need to use the <code>galah_config</code> function to set two <code>galah</code>-specific variables: 1. <code>atlas</code> to <code>Australia</code> (to get ALA data), and 2. <code>email</code> to your ALA-registered email. To register for the ALA, visit <a href="https://auth.ala.org.au/userdetails/registration/createAccount">the ALA’s Create Account page</a>.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> galah</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>galah.galah_config(atlas <span class="op">=</span> <span class="st">"Australia"</span>, email <span class="op">=</span> <span class="st">"amanda.buyan@csiro.au"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we will use an example query about Peron’s tree frog:</p>
<p><em>Download record counts of Peron’s tree frog since 2018 in New South Wales by FrogID</em></p>
<p>Below, we have added comments to show the user what parts of this code correspond to the query above.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>galah.atlas_counts(                      <span class="co"># *Download record counts*</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    taxa<span class="op">=</span><span class="st">"litoria peronii"</span>,              <span class="co"># *of Peron's tree frog*</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    filters<span class="op">=</span>[<span class="st">"year&gt;=2018"</span>,               <span class="co"># *since 2018*</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"cl22=New South Wales"</span>,     <span class="co"># *in New South Wales*</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">"dataResourceName=FrogID"</span>]  <span class="co"># *by FrogID*</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">totalRecords</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>27647</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now that we know we expect ~28,000 counts of Peron’s tree frog, we can download the occurrence records associated with this query.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>galah.atlas_occurrences(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    taxa<span class="op">=</span><span class="st">"litoria peronii"</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    filters<span class="op">=</span>[<span class="st">"year&gt;=2018"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"cl22=New South Wales"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">"dataResourceName=FrogID"</span>]</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">recordID</th>
<th data-quarto-table-cell-role="th">catalogNumber</th>
<th data-quarto-table-cell-role="th">taxonConceptID</th>
<th data-quarto-table-cell-role="th">scientificName</th>
<th data-quarto-table-cell-role="th">raw_vernacularName</th>
<th data-quarto-table-cell-role="th">scientificName.1</th>
<th data-quarto-table-cell-role="th">taxonRank</th>
<th data-quarto-table-cell-role="th">vernacularName</th>
<th data-quarto-table-cell-role="th">kingdom</th>
<th data-quarto-table-cell-role="th">phylum</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">day</th>
<th data-quarto-table-cell-role="th">eventDate</th>
<th data-quarto-table-cell-role="th">raw_basisOfRecord</th>
<th data-quarto-table-cell-role="th">basisOfRecord</th>
<th data-quarto-table-cell-role="th">occurrenceStatus</th>
<th data-quarto-table-cell-role="th">raw_sex</th>
<th data-quarto-table-cell-role="th">preparations</th>
<th data-quarto-table-cell-role="th">informationWithheld</th>
<th data-quarto-table-cell-role="th">dataGeneralizations</th>
<th data-quarto-table-cell-role="th">spatiallyValid</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0008c41d-fd35-421a-9976-8213ade88ba8</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>15</td>
<td>2020-12-15T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>000c1c20-bec3-4fc3-8d65-3de76961a998</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>13</td>
<td>2019-01-13T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>000e46ad-9ace-437c-ac31-48843f603c9c</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>28</td>
<td>2021-10-28T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>001229c0-4c48-486f-8d5d-5ddfe7420756</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>28</td>
<td>2021-10-28T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>0014b8ff-ddd5-4a24-b7ee-cb57c62ba2d2</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>10</td>
<td>2018-11-10T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27642</td>
<td>fff85846-94f6-4285-b520-219a574beaa6</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>8</td>
<td>2021-11-08T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27643</td>
<td>fffa5afb-2388-4ec2-937c-d73c104352d3</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>16</td>
<td>2019-11-16T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27644</td>
<td>fffb30c7-cee4-4d5d-8c36-b15721ac4565</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>21</td>
<td>2020-10-21T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27645</td>
<td>fffba153-a597-4ed2-a325-8f9d3e567ae9</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>18</td>
<td>2021-09-18T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27646</td>
<td>fffd964f-475f-4a9d-9763-5654fa842aee</td>
<td>NaN</td>
<td>https://biodiversity.org.au/afd/taxa/c584f24b-...</td>
<td>Litoria peronii</td>
<td>NaN</td>
<td>Litoria peronii</td>
<td>species</td>
<td>Peron's Tree Frog</td>
<td>Animalia</td>
<td>Chordata</td>
<td>...</td>
<td>23</td>
<td>2021-10-23T00:00:00Z</td>
<td>Occurrence</td>
<td>OCCURRENCE</td>
<td>PRESENT</td>
<td>male</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>True</td>
</tr>
</tbody>
</table>

<p>27647 rows × 55 columns</p>
</div>
</div>
</div>
<p>As we can see, we get a lot of columns by default from the ALA! To see which columns that are available, we can type the following code:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>frogs <span class="op">=</span> galah.atlas_occurrences(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    taxa<span class="op">=</span><span class="st">"litoria peronii"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    filters<span class="op">=</span>[<span class="st">"year&gt;=2018"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"cl22=New South Wales"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">"dataResourceName=FrogID"</span>]</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>frogs.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>Index(['recordID', 'catalogNumber', 'taxonConceptID', 'scientificName',
       'raw_vernacularName', 'scientificName.1', 'taxonRank', 'vernacularName',
       'kingdom', 'phylum', 'class', 'order', 'family', 'genus', 'species',
       'subspecies', 'dataResourceUid', 'institutionUid', 'institutionName',
       'collectionUid', 'collectionName', 'dcterms:license', 'institutionCode',
       'collectionCode', 'raw_locality', 'raw_decimalLatitude',
       'raw_decimalLongitude', 'raw_geodeticDatum', 'decimalLatitude',
       'decimalLongitude', 'coordinatePrecision',
       'coordinateUncertaintyInMeters', 'country', 'stateProvince', 'cl959',
       'cl21', 'cl1048', 'minimumElevationInMeters',
       'maximumElevationInMeters', 'minimumDepthInMeters',
       'maximumDepthInMeters', 'individualCount', 'recordedBy', 'year',
       'month', 'day', 'eventDate', 'raw_basisOfRecord', 'basisOfRecord',
       'occurrenceStatus', 'raw_sex', 'preparations', 'informationWithheld',
       'dataGeneralizations', 'spatiallyValid'],
      dtype='object')</code></pre>
</div>
</div>
<p>Since we only want to make a map using the species name, latitude and longitude, we can specify the data columns we want by using the <code>fields</code> argument, and using the column names <code>scientificName</code>,<code>decimalLatitude</code>, and <code>decimalLongitude</code>.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>galah.atlas_occurrences(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    taxa<span class="op">=</span><span class="st">"litoria peronii"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    filters<span class="op">=</span>[<span class="st">"year&gt;=2018"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"cl22=New South Wales"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">"dataResourceName=FrogID"</span>],</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">"scientificName"</span>,<span class="st">"decimalLatitude"</span>,<span class="st">"decimalLongitude"</span>]</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">scientificName</th>
<th data-quarto-table-cell-role="th">decimalLatitude</th>
<th data-quarto-table-cell-role="th">decimalLongitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Litoria peronii</td>
<td>-32.383000</td>
<td>149.261000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Litoria peronii</td>
<td>-33.800793</td>
<td>151.162256</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Litoria peronii</td>
<td>-31.818230</td>
<td>151.909507</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Litoria peronii</td>
<td>-31.261342</td>
<td>152.910330</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Litoria peronii</td>
<td>-34.274096</td>
<td>150.630698</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27642</td>
<td>Litoria peronii</td>
<td>-33.766382</td>
<td>150.975866</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27643</td>
<td>Litoria peronii</td>
<td>-33.739746</td>
<td>151.129883</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27644</td>
<td>Litoria peronii</td>
<td>-34.739682</td>
<td>150.549839</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27645</td>
<td>Litoria peronii</td>
<td>-33.804783</td>
<td>151.165317</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27646</td>
<td>Litoria peronii</td>
<td>-29.361663</td>
<td>151.144758</td>
</tr>
</tbody>
</table>

<p>27647 rows × 3 columns</p>
</div>
</div>
</div>
<p>Now that we have the data we want, it is time to make a map. First, download the latest state and territory boundaries from the Australian Bureau of statistics (link <a href="https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/access-and-downloads/digital-boundary-files">here</a>). After downloading it, put it in a folder you can easily access and then unzip the zip file you downloaded to find a shapefile titled <code>STE_2021_AUST_GDA94.shp</code>. This is what you need to complete the map.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get Peron's tree frog occurrences</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>frogs <span class="op">=</span> galah.atlas_occurrences(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  taxa<span class="op">=</span><span class="st">"litoria peronii"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  filters<span class="op">=</span>[<span class="st">"year&gt;=2018"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>           <span class="st">"cl22=New South Wales"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>           <span class="st">"dataResourceName=FrogID"</span>],</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  fields<span class="op">=</span>[<span class="st">"scientificName"</span>,<span class="st">"decimalLongitude"</span>,<span class="st">"decimalLatitude"</span>]</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Get Australian state and territory boundaries</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>states <span class="op">=</span> gpd.read_file(<span class="st">"STE_2021_AUST_GDA94.shp"</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Change Coordinate Reference System (CRS) of the shape file and plot New South Wales </span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>states <span class="op">=</span> states.to_crs(<span class="dv">4326</span>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>states[states[<span class="st">"STE_NAME21"</span>] <span class="op">==</span> <span class="st">"New South Wales"</span>].plot(edgecolor <span class="op">=</span> <span class="st">"#5A5A5A"</span>, linewidth <span class="op">=</span> <span class="fl">0.5</span>, facecolor <span class="op">=</span> <span class="st">"white"</span>, figsize <span class="op">=</span> (<span class="dv">12</span>,<span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>&lt;Axes: &gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Make_A_Map_files/figure-html/cell-7-output-2.png" width="797" height="485"></p>
</div>
</div>
<p>Now, we will add our species data to the map.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> states[states[<span class="st">"STE_NAME21"</span>] <span class="op">==</span> <span class="st">"New South Wales"</span>].plot(edgecolor <span class="op">=</span> <span class="st">"#5A5A5A"</span>, linewidth <span class="op">=</span> <span class="fl">0.5</span>, facecolor <span class="op">=</span> <span class="st">"white"</span>, figsize <span class="op">=</span> (<span class="dv">12</span>,<span class="dv">6</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>plt.scatter(frogs[<span class="st">'decimalLongitude'</span>],frogs[<span class="st">'decimalLatitude'</span>], c <span class="op">=</span> <span class="st">"#6fab3f"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>&lt;matplotlib.collections.PathCollection at 0x17889ff10&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Make_A_Map_files/figure-html/cell-8-output-2.png" width="797" height="485"></p>
</div>
</div>
<p>For some final touches (to make the map prettier), we can add labels, titles and legends, as well as save the figure.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> states[states[<span class="st">"STE_NAME21"</span>] <span class="op">==</span> <span class="st">"New South Wales"</span>].plot(edgecolor <span class="op">=</span> <span class="st">"#5A5A5A"</span>, linewidth <span class="op">=</span> <span class="fl">0.5</span>, facecolor <span class="op">=</span> <span class="st">"white"</span>, figsize <span class="op">=</span> (<span class="dv">12</span>,<span class="dv">6</span>))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>plt.scatter(frogs[<span class="st">'decimalLongitude'</span>],frogs[<span class="st">'decimalLatitude'</span>], c <span class="op">=</span> <span class="st">"#6fab3f"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, label <span class="op">=</span> <span class="st">"Litoria peronii"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Longitude"</span>,fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Latitude"</span>,fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Peron's tree frog since 2018 in New South Wales by FrogID"</span>,fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">"perons_tree_frog_nsw.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Make_A_Map_files/figure-html/cell-9-output-1.png" width="836" height="540"></p>
</div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>